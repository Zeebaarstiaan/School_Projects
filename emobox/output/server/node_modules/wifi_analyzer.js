var secondsInHour   = 60 * 60
    values          = new Array(),
    lastDayAtSchool = null;

exports.reset = function () {
    values = new Array();
};

exports.setValues = function (valueArray) {
    values = valueArray;
};

exports.addValue = function (value) {
    values.push(value);
};

exports.getHoursAtSchool = function () {
    var firstConnectionTimestamp = 0,
        lastConnectionTimestamp  = 0,
        secondsAtSchool          = 0,
        reversedValues           = values.reverse();
    for (var index in reversedValues) {
        var wifiConnection = reversedValues[index];
        if (wifiConnection.value.indexOf('eduroam') > -1) {
            if (lastConnectionTimestamp === 0) {
                lastConnectionTimestamp = wifiConnection.date;
                lastDayAtSchool         = new Date(wifiConnection.date * 1000);
            }
            firstConnectionTimestamp = wifiConnection.date;
        } else if (firstConnectionTimestamp !== 0) {
            break;
        }
    }
    secondsAtSchool = lastConnectionTimestamp - firstConnectionTimestamp;
    return Math.ceil(secondsAtSchool / secondsInHour);
};

exports.getLastDayAtSchool = function () {
    return lastDayAtSchool;
}